import { useEffect,useState } from "react";
import { Link } from "react-router-dom";
import { useParams } from "react-router-dom";
import { COMPANY_URL } from "../imgData";

function CompanyPage() {
    let { company } = useParams();
    let [comp_info, setCompanyInfo] = useState(null);
    let [error, setError] = useState(null);

    console.log(company)

    useEffect(() => {
        fetch(`${COMPANY_URL}/${encodeURIComponent(company)}`)
            .then(resp => resp.json())
            .then(data => setCompanyInfo(data))
            .catch(e => {
                console.log(e)
                setCompanyInfo(null);
                setError('Not Found or connection error');
            })
    }, [company]);

    if (comp_info) {
        console.log(comp_info);
        return (
            <div>
                <img src={comp_info.url} alt="" width='100%' style={{marginTop: '60px'}} />
                <h1 style={{marginLeft: '30px', marginTop: '30px', marginRight: "100px", fontSize: "40px"}}>
                    {comp_info.title}
                </h1>
                <Link to={`/${company}/learn-more`}>
                <svg width="24" height="156" viewBox="0 0 24 156" fill="none" xmlns="http://www.w3.org/2000/svg" className="learn-more">
                <rect x="1.52588e-05" y="0.249878" width="24" height="24" rx="12" fill="black"/>
                <path d="M4.41992 153.9L4.41992 151.918L17.3398 151.918L17.3398 144.877L19 144.877L19 153.9L4.41992 153.9ZM12.6328 133.012L13.5117 133.012L13.5117 140.795L13.5703 140.795C15.0612 140.847 16.1322 140.564 16.7832 139.945C17.4342 139.32 17.7598 138.441 17.7598 137.309C17.7598 136.736 17.6686 136.137 17.4863 135.512C17.304 134.887 17.0273 134.219 16.6563 133.51L18.4434 133.51C18.7233 134.193 18.9316 134.854 19.0684 135.492C19.2116 136.124 19.2832 136.736 19.2832 137.328C19.2832 139.027 18.7754 140.355 17.7598 141.313C16.7376 142.27 15.3314 142.748 13.541 142.748C11.7962 142.748 10.403 142.279 9.36133 141.342C8.31966 140.404 7.79883 139.154 7.79883 137.592C7.79883 136.199 8.27083 135.102 9.21484 134.301C10.1589 133.493 11.2982 133.064 12.6328 133.012ZM12.1055 134.809C11.3503 134.887 10.6992 135.163 10.1523 135.639C9.59896 136.107 9.32227 136.785 9.32227 137.67C9.32227 138.536 9.60872 139.249 10.1816 139.809C10.7546 140.368 11.3991 140.674 12.1152 140.727L12.1055 134.809ZM13.502 125.043L13.502 125.639C13.502 126.687 13.6875 127.478 14.0586 128.012C14.4232 128.539 14.9701 128.803 15.6992 128.803C16.3568 128.803 16.8678 128.604 17.2324 128.207C17.597 127.81 17.7793 127.26 17.7793 126.557C17.7793 125.567 17.4375 124.789 16.7539 124.223C16.0638 123.656 15.1133 123.37 13.9023 123.363L13.502 123.363L13.502 125.043ZM12.7598 121.557L19 121.557L19 123.363L17.3789 123.363C18.0299 123.747 18.5117 124.232 18.8242 124.818C19.1302 125.398 19.2832 126.104 19.2832 126.938C19.2832 128.051 18.9707 128.939 18.3457 129.604C17.7142 130.268 16.8711 130.6 15.8164 130.6C14.599 130.6 13.6745 130.193 13.043 129.379C12.4115 128.559 12.0957 127.357 12.0957 125.775L12.0957 123.363L11.8125 123.363C10.9401 123.37 10.3086 123.591 9.91797 124.027C9.52083 124.464 9.32227 125.16 9.32227 126.117C9.32227 126.729 9.41016 127.348 9.58594 127.973C9.76172 128.598 10.0189 129.206 10.3574 129.799L8.56055 129.799C8.30664 129.135 8.11784 128.5 7.99414 127.895C7.86393 127.283 7.79883 126.69 7.79883 126.117C7.79883 125.212 7.93229 124.441 8.19922 123.803C8.46615 123.158 8.86654 122.637 9.40039 122.24C9.72591 121.993 10.1296 121.817 10.6113 121.713C11.0866 121.609 11.8027 121.557 12.7598 121.557ZM10.3184 108.568C10.0189 108.952 9.80078 109.343 9.66406 109.74C9.52734 110.137 9.45898 110.574 9.45898 111.049C9.45898 112.169 9.81055 113.025 10.5137 113.617C11.2168 114.21 12.2324 114.506 13.5605 114.506L19 114.506L19 116.313L8.0625 116.313L8.0625 114.506L10.2012 114.506C9.42643 114.206 8.83398 113.747 8.42383 113.129C8.00716 112.504 7.79883 111.765 7.79883 110.912C7.79883 110.469 7.85417 110.056 7.96484 109.672C8.07552 109.288 8.24805 108.92 8.48242 108.568L10.3184 108.568ZM12.2227 97.5332L19 97.5332L19 99.3398L12.2227 99.3398C11.2396 99.3398 10.5169 99.5124 10.0547 99.8574C9.59245 100.202 9.36133 100.743 9.36133 101.479C9.36133 102.318 9.66081 102.966 10.2598 103.422C10.8522 103.871 11.7051 104.096 12.8184 104.096L19 104.096L19 105.893L8.0625 105.893L8.0625 104.096L9.70313 104.096C9.07813 103.777 8.60612 103.344 8.28711 102.797C7.96159 102.25 7.79883 101.602 7.79883 100.854C7.79883 99.7402 8.16667 98.9102 8.90234 98.3633C9.63151 97.8099 10.7383 97.5332 12.2227 97.5332ZM4.46875 83.3438L4.46875 80.707L11.8711 78.1875L4.46875 75.6484L4.46875 73.002L19 73.002L19 74.8281L6.1582 74.8281L13.8145 77.4258L13.8145 78.9199L6.1582 81.5273L19 81.5273L19 83.3438L4.46875 83.3438ZM9.32227 65.6289C9.32227 66.5404 9.67708 67.2305 10.3867 67.6992C11.0964 68.168 12.1478 68.4023 13.541 68.4023C14.9277 68.4023 15.9792 68.168 16.6953 67.6992C17.4049 67.2305 17.7598 66.5404 17.7598 65.6289C17.7598 64.7109 17.4049 64.0176 16.6953 63.5488C15.9792 63.0801 14.9277 62.8457 13.541 62.8457C12.1478 62.8457 11.0964 63.0801 10.3867 63.5488C9.67708 64.0176 9.32227 64.7109 9.32227 65.6289ZM7.79883 65.6289C7.79883 64.112 8.29037 62.9531 9.27344 62.1523C10.2565 61.3451 11.679 60.9414 13.541 60.9414C15.4095 60.9414 16.8353 61.3418 17.8184 62.1426C18.7949 62.9434 19.2832 64.1055 19.2832 65.6289C19.2832 67.1458 18.7949 68.3047 17.8184 69.1055C16.8353 69.9063 15.4095 70.3066 13.541 70.3066C11.679 70.3066 10.2565 69.9063 9.27344 69.1055C8.29037 68.3047 7.79883 67.1458 7.79883 65.6289ZM10.3184 48.3145C10.0189 48.6986 9.80078 49.0892 9.66406 49.4863C9.52735 49.8835 9.45899 50.3197 9.45899 50.7949C9.45899 51.9147 9.81055 52.7708 10.5137 53.3633C11.2168 53.9557 12.2324 54.252 13.5605 54.252L19 54.252L19 56.0586L8.0625 56.0586L8.0625 54.252L10.2012 54.252C9.42643 53.9525 8.83399 53.4935 8.42383 52.875C8.00716 52.25 7.79883 51.5111 7.79883 50.6582C7.79883 50.2155 7.85417 49.8021 7.96485 49.418C8.07552 49.0339 8.24805 48.666 8.48242 48.3145L10.3184 48.3145ZM12.6328 36.6055L13.5117 36.6055L13.5117 44.3887L13.5703 44.3887C15.0612 44.4408 16.1322 44.1576 16.7832 43.5391C17.4342 42.9141 17.7598 42.0352 17.7598 40.9023C17.7598 40.3294 17.6686 39.7305 17.4863 39.1055C17.304 38.4805 17.0273 37.8132 16.6563 37.1035L18.4434 37.1035C18.7233 37.7871 18.9316 38.4479 19.0684 39.0859C19.2116 39.7174 19.2832 40.3294 19.2832 40.9219C19.2832 42.6211 18.7754 43.9492 17.7598 44.9063C16.7376 45.8633 15.3314 46.3418 13.541 46.3418C11.7962 46.3418 10.403 45.873 9.36133 44.9355C8.31966 43.998 7.79883 42.748 7.79883 41.1855C7.79883 39.7923 8.27083 38.6953 9.21485 37.8945C10.1589 37.0872 11.2982 36.6576 12.6328 36.6055ZM12.1055 38.4023C11.3503 38.4805 10.6992 38.7572 10.1523 39.2324C9.59896 39.7012 9.32227 40.3783 9.32227 41.2637C9.32227 42.1296 9.60873 42.8424 10.1816 43.4023C10.7546 43.9622 11.3991 44.2682 12.1152 44.3203L12.1055 38.4023Z" fill="black"/>
                <path d="M5.75006 7L17.2501 7L17.2501 18.5" stroke="white" stroke-width="2"/>
                <path d="M17.0834 7.16658L6.08337 18.1666" stroke="white" stroke-width="2"/>
                </svg>
                </Link>
            </div>
        );
    } else {
        if (error) {
            return (
                <div style={{margin: '7rem'}}>{error}</div>
            )
        } else {
            <h2>Laoding...</h2>
        }
    }
}

export default CompanyPage;