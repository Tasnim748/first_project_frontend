import CarouselImage from "./CarouselImage";
import './CarouselWritings.css'
import CarouselWritings from "./CarouselWritings";
import { useState, useEffect } from "react";
import { Link, useParams } from "react-router-dom";
import { IMG_URL } from "../imgData";

import Slider from "react-slick";

import './dot.css';

function CarouselPage() {
    const [imgNum, setImgNum] = useState(0);
    const [ImgData, setImgData] = useState([]);
    const testData = ImgData[imgNum];

    const { company } = useParams();

    useEffect(() => {
        fetch(`${IMG_URL}/${company}`)
            .then(resp => resp.json())
            .then(data => setImgData(data))
            .catch(e => alert('failed to fetch carousel images'))
    }, []);

    const settings = {
        dots: true,
        infinite: true,
        speed: 500,
        slidesToShow: 1,
        swipeToSlide: true,
        slidesToScroll: 1,
        beforeChange: (current, next) => setImgNum(next),
    };

    if (ImgData.length !== 0) {
        return (
            <div>
              <Slider {...settings}>
                {ImgData.map((img,index) => (
                    <CarouselImage url={img.url} title={img.title} key={index} />
                ))}
              </Slider>
              { testData && (
                <div style={{display: 'flex', alignItems: 'stretch', marginBottom: '6%'}}>
                    <div style={{flexGrow: '7', paddingLeft: '10%', paddingTop: '3%'}}>
                        <CarouselWritings title={testData.title} description={testData.description}/>
                    </div>
                    <div style={{flexGrow: '3', textAlign: 'center', paddingTop: '30%'}}>
                        <Link to='/' style={{display: 'inline-block'}}>
                            <svg width="24" height="235" viewBox="0 0 24 235" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M11.6465 231.396L17.3789 231.396L17.3789 229.063C17.3789 227.917 17.1803 227.1 16.7832 226.611C16.3796 226.123 15.7188 225.879 14.8008 225.879C13.5898 225.879 12.763 226.136 12.3203 226.65C11.8711 227.165 11.6465 227.969 11.6465 229.063L11.6465 231.396ZM6.04102 231.396L10.0449 231.396L10.0449 229.102C10.0449 228.151 9.86263 227.464 9.49805 227.041C9.13346 226.611 8.67448 226.396 8.12109 226.396C7.38542 226.396 6.85482 226.608 6.5293 227.031C6.20378 227.448 6.04102 228.138 6.04102 229.102L6.04102 231.396ZM4.41992 233.379L4.41992 229.063C4.41992 227.572 4.74219 226.423 5.38672 225.615C6.03125 224.808 6.94271 224.404 8.12109 224.404C8.7526 224.404 9.32552 224.619 9.83984 225.049C10.3542 225.472 10.6764 226.11 10.8066 226.963C10.9499 226.006 11.36 225.257 12.0371 224.717C12.7077 224.17 13.694 223.896 14.9961 223.896C16.3177 223.896 17.3171 224.329 17.9941 225.195C18.6647 226.061 19 227.35 19 229.063L19 233.379L4.41992 233.379ZM10.3184 211.67C10.0189 212.054 9.80078 212.445 9.66406 212.842C9.52734 213.239 9.45898 213.675 9.45898 214.15C9.45898 215.27 9.81055 216.126 10.5137 216.719C11.2168 217.311 12.2324 217.607 13.5605 217.607L19 217.607L19 219.414L8.0625 219.414L8.0625 217.607L10.2012 217.607C9.42643 217.308 8.83398 216.849 8.42383 216.23C8.00716 215.605 7.79883 214.867 7.79883 214.014C7.79883 213.571 7.85417 213.158 7.96484 212.773C8.07552 212.389 8.24805 212.021 8.48242 211.67L10.3184 211.67ZM8.10156 207.813L8.10156 203.213L17.6035 203.213L17.6035 199.648L19 199.648L19 208.574L17.6035 208.574L17.6035 205.01L9.49805 205.01L9.49805 207.813L8.10156 207.813ZM3.85352 205.01L3.85352 203.213L6.11914 203.213L6.11914 205.01L3.85352 205.01ZM9.45898 190.469L3.80469 190.469L3.80469 188.672L19 188.672L19 190.469L17.623 190.469C18.1634 190.768 18.5768 191.169 18.8633 191.67C19.1432 192.165 19.2832 192.738 19.2832 193.389C19.2832 194.71 18.7721 195.752 17.75 196.514C16.7214 197.269 15.3053 197.646 13.502 197.646C11.7246 197.646 10.3314 197.266 9.32227 196.504C8.30664 195.742 7.79883 194.704 7.79883 193.389C7.79883 192.731 7.94206 192.152 8.22852 191.65C8.50846 191.149 8.91862 190.755 9.45898 190.469ZM13.541 195.752C14.9342 195.752 15.9857 195.531 16.6953 195.088C17.4049 194.645 17.7598 193.991 17.7598 193.125C17.7598 192.259 17.4017 191.602 16.6855 191.152C15.9694 190.697 14.9212 190.469 13.541 190.469C12.1543 190.469 11.1061 190.697 10.3965 191.152C9.68034 191.602 9.32227 192.259 9.32227 193.125C9.32227 193.991 9.67708 194.645 10.3867 195.088C11.0964 195.531 12.1478 195.752 13.541 195.752ZM13.4434 178.418C12.0957 178.418 11.0736 178.639 10.377 179.082C9.67383 179.518 9.32227 180.156 9.32227 180.996C9.32227 181.875 9.67383 182.546 10.377 183.008C11.0736 183.47 12.0957 183.701 13.4434 183.701C14.791 183.701 15.8197 183.47 16.5293 183.008C17.2324 182.539 17.584 181.862 17.584 180.977C17.584 180.15 17.2292 179.518 16.5195 179.082C15.8099 178.639 14.7845 178.418 13.4434 178.418ZM18.2969 176.621C19.9375 176.621 21.181 177.008 22.0273 177.783C22.8737 178.558 23.2969 179.697 23.2969 181.201C23.2969 181.696 23.2513 182.214 23.1602 182.754C23.069 183.294 22.9355 183.835 22.7598 184.375L20.9824 184.375C21.2819 183.737 21.5033 183.158 21.6465 182.637C21.7897 182.116 21.8613 181.637 21.8613 181.201C21.8613 180.231 21.5977 179.525 21.0703 179.082C20.543 178.639 19.7064 178.418 18.5605 178.418L18.4824 178.418L17.2617 178.418C17.8737 178.704 18.3294 179.095 18.6289 179.59C18.9284 180.085 19.0781 180.687 19.0781 181.396C19.0781 182.673 18.5671 183.691 17.5449 184.453C16.5228 185.215 15.1556 185.596 13.4434 185.596C11.7246 185.596 10.3542 185.215 9.33203 184.453C8.3099 183.691 7.79883 182.673 7.79883 181.396C7.79883 180.693 7.9388 180.098 8.21875 179.609C8.4987 179.121 8.93164 178.724 9.51758 178.418L8.10156 178.418L8.10156 176.621L18.2969 176.621ZM8.10156 171.66L8.10156 167.061L17.6035 167.061L17.6035 163.496L19 163.496L19 172.422L17.6035 172.422L17.6035 168.857L9.49805 168.857L9.49805 171.66L8.10156 171.66ZM3.85352 168.857L3.85352 167.061L6.11914 167.061L6.11914 168.857L3.85352 168.857ZM12.2227 152.432L19 152.432L19 154.238L12.2227 154.238C11.2396 154.238 10.5169 154.411 10.0547 154.756C9.59245 155.101 9.36133 155.641 9.36133 156.377C9.36133 157.217 9.66081 157.865 10.2598 158.32C10.8522 158.77 11.7051 158.994 12.8184 158.994L19 158.994L19 160.791L8.0625 160.791L8.0625 158.994L9.70313 158.994C9.07813 158.675 8.60612 158.242 8.28711 157.695C7.96159 157.148 7.79883 156.501 7.79883 155.752C7.79883 154.639 8.16667 153.809 8.90234 153.262C9.63151 152.708 10.7383 152.432 12.2227 152.432ZM13.4434 142.266C12.0957 142.266 11.0736 142.487 10.377 142.93C9.67383 143.366 9.32227 144.004 9.32227 144.844C9.32227 145.723 9.67383 146.393 10.377 146.855C11.0736 147.318 12.0957 147.549 13.4434 147.549C14.791 147.549 15.8197 147.318 16.5293 146.855C17.2324 146.387 17.584 145.71 17.584 144.824C17.584 143.997 17.2292 143.366 16.5195 142.93C15.8099 142.487 14.7845 142.266 13.4434 142.266ZM18.2969 140.469C19.9375 140.469 21.181 140.856 22.0273 141.631C22.8737 142.406 23.2969 143.545 23.2969 145.049C23.2969 145.544 23.2513 146.061 23.1602 146.602C23.069 147.142 22.9355 147.682 22.7598 148.223L20.9824 148.223C21.2819 147.585 21.5033 147.005 21.6465 146.484C21.7897 145.964 21.8613 145.485 21.8613 145.049C21.8613 144.079 21.5977 143.372 21.0703 142.93C20.543 142.487 19.7064 142.266 18.5605 142.266L18.4824 142.266L17.2617 142.266C17.8737 142.552 18.3294 142.943 18.6289 143.438C18.9284 143.932 19.0781 144.535 19.0781 145.244C19.0781 146.52 18.5671 147.539 17.5449 148.301C16.5228 149.063 15.1556 149.443 13.4434 149.443C11.7246 149.443 10.3542 149.063 9.33203 148.301C8.3099 147.539 7.79883 146.52 7.79883 145.244C7.79883 144.541 7.9388 143.945 8.21875 143.457C8.4987 142.969 8.93164 142.572 9.51758 142.266L8.10156 142.266L8.10156 140.469L18.2969 140.469ZM11.6465 122.939L17.3789 122.939L17.3789 120.605C17.3789 119.46 17.1803 118.643 16.7832 118.154C16.3796 117.666 15.7188 117.422 14.8008 117.422C13.5898 117.422 12.763 117.679 12.3203 118.193C11.8711 118.708 11.6465 119.512 11.6465 120.605L11.6465 122.939ZM6.04102 122.939L10.0449 122.939L10.0449 120.645C10.0449 119.694 9.86263 119.007 9.49805 118.584C9.13346 118.154 8.67448 117.939 8.1211 117.939C7.38542 117.939 6.85482 118.151 6.5293 118.574C6.20378 118.991 6.04102 119.681 6.04102 120.645L6.04102 122.939ZM4.41992 124.922L4.41992 120.605C4.41992 119.115 4.74219 117.965 5.38672 117.158C6.03125 116.351 6.94271 115.947 8.1211 115.947C8.75261 115.947 9.32552 116.162 9.83985 116.592C10.3542 117.015 10.6764 117.653 10.8066 118.506C10.9499 117.549 11.36 116.8 12.0371 116.26C12.7077 115.713 13.694 115.439 14.9961 115.439C16.3177 115.439 17.3171 115.872 17.9941 116.738C18.6647 117.604 19 118.893 19 120.605L19 124.922L4.41992 124.922ZM8.10156 111.406L8.10156 106.807L17.6035 106.807L17.6035 103.242L19 103.242L19 112.168L17.6035 112.168L17.6035 108.604L9.49805 108.604L9.49805 111.406L8.10156 111.406ZM3.85352 108.604L3.85352 106.807L6.11914 106.807L6.11914 108.604L3.85352 108.604ZM12.2227 92.1777L19 92.1777L19 93.9844L12.2227 93.9844C11.2396 93.9844 10.5169 94.1569 10.0547 94.502C9.59245 94.847 9.36133 95.3874 9.36133 96.123C9.36133 96.9629 9.66081 97.6107 10.2598 98.0664C10.8522 98.5156 11.7051 98.7402 12.8184 98.7402L19 98.7402L19 100.537L8.0625 100.537L8.0625 98.7402L9.70313 98.7402C9.07813 98.4212 8.60612 97.9883 8.28711 97.4414C7.96159 96.8945 7.79883 96.2467 7.79883 95.498C7.79883 94.3848 8.16667 93.5547 8.90235 93.0078C9.63151 92.4544 10.7383 92.1777 12.2227 92.1777ZM13.502 83.5352L13.502 84.1309C13.502 85.179 13.6875 85.9701 14.0586 86.5039C14.4232 87.0313 14.9701 87.2949 15.6992 87.2949C16.3568 87.2949 16.8678 87.0964 17.2324 86.6992C17.597 86.3021 17.7793 85.752 17.7793 85.0488C17.7793 84.0592 17.4375 83.2813 16.7539 82.7148C16.0638 82.1484 15.1133 81.862 13.9023 81.8555L13.502 81.8555L13.502 83.5352ZM12.7598 80.0488L19 80.0488L19 81.8555L17.3789 81.8555C18.0299 82.2396 18.5117 82.7246 18.8242 83.3105C19.1302 83.89 19.2832 84.5964 19.2832 85.4297C19.2832 86.543 18.9707 87.4316 18.3457 88.0957C17.7142 88.7598 16.8711 89.0918 15.8164 89.0918C14.599 89.0918 13.6745 88.6849 13.043 87.8711C12.4115 87.0508 12.0957 85.8496 12.0957 84.2676L12.0957 81.8555L11.8125 81.8555C10.9401 81.862 10.3086 82.0833 9.91797 82.5195C9.52084 82.9557 9.32227 83.6523 9.32227 84.6094C9.32227 85.2214 9.41016 85.8398 9.58594 86.4648C9.76172 87.0898 10.0189 87.6986 10.3574 88.291L8.56055 88.291C8.30664 87.627 8.11784 86.9922 7.99414 86.3867C7.86393 85.7747 7.79883 85.1823 7.79883 84.6094C7.79883 83.7044 7.93229 82.9329 8.19922 82.2949C8.46615 81.6504 8.86654 81.1296 9.40039 80.7324C9.72591 80.485 10.1296 80.3092 10.6113 80.2051C11.0866 80.1009 11.8027 80.0488 12.7598 80.0488ZM10.3184 67.0605C10.0189 67.4447 9.80078 67.8353 9.66406 68.2324C9.52735 68.6296 9.45899 69.0658 9.45899 69.541C9.45899 70.6608 9.81055 71.5169 10.5137 72.1094C11.2168 72.7018 12.2324 72.998 13.5605 72.998L19 72.998L19 74.8047L8.0625 74.8047L8.0625 72.998L10.2012 72.998C9.42643 72.6986 8.83399 72.2396 8.42383 71.6211C8.00716 70.9961 7.79883 70.2572 7.79883 69.4043C7.79883 68.9616 7.85417 68.5482 7.96485 68.1641C8.07552 67.7799 8.24805 67.4121 8.48242 67.0605L10.3184 67.0605ZM8.10156 63.2031L8.10156 58.6035L17.6035 58.6035L17.6035 55.0391L19 55.0391L19 63.9648L17.6035 63.9648L17.6035 60.4004L9.49805 60.4004L9.49805 63.2031L8.10156 63.2031ZM3.85352 60.4004L3.85352 58.6035L6.11914 58.6035L6.11914 60.4004L3.85352 60.4004ZM12.6328 43.3008L13.5117 43.3008L13.5117 51.084L13.5703 51.084C15.0612 51.1361 16.1322 50.8529 16.7832 50.2344C17.4342 49.6094 17.7598 48.7305 17.7598 47.5977C17.7598 47.0247 17.6686 46.4258 17.4863 45.8008C17.304 45.1758 17.0273 44.5085 16.6563 43.7988L18.4434 43.7988C18.7233 44.4824 18.9316 45.1432 19.0684 45.7813C19.2116 46.4128 19.2832 47.0247 19.2832 47.6172C19.2832 49.3164 18.7754 50.6445 17.7598 51.6016C16.7376 52.5586 15.3314 53.0371 13.541 53.0371C11.7962 53.0371 10.403 52.5684 9.36133 51.6309C8.31966 50.6934 7.79883 49.4434 7.79883 47.8809C7.79883 46.4876 8.27084 45.3906 9.21485 44.5898C10.1589 43.7826 11.2982 43.3529 12.6328 43.3008ZM12.1055 45.0977C11.3503 45.1758 10.6992 45.4525 10.1523 45.9277C9.59896 46.3965 9.32227 47.0736 9.32227 47.959C9.32227 48.8249 9.60873 49.5378 10.1816 50.0977C10.7546 50.6576 11.3991 50.9635 12.1152 51.0156L12.1055 45.0977ZM8.44336 32.6855L10.2012 32.6855C9.9017 33.1999 9.67709 33.7174 9.52735 34.2383C9.37761 34.7591 9.30274 35.2897 9.30274 35.8301C9.30274 36.6439 9.4362 37.2526 9.70313 37.6563C9.96354 38.0534 10.3639 38.252 10.9043 38.252C11.3926 38.252 11.7572 38.1022 11.998 37.8027C12.2389 37.5033 12.4733 36.7578 12.7012 35.5664L12.8379 34.8438C13.0072 33.9518 13.3457 33.278 13.8535 32.8223C14.3613 32.36 15.0221 32.1289 15.8359 32.1289C16.9167 32.1289 17.763 32.513 18.375 33.2813C18.9805 34.0495 19.2832 35.1172 19.2832 36.4844C19.2832 37.0247 19.2246 37.5911 19.1074 38.1836C18.9967 38.776 18.8275 39.4173 18.5996 40.1074L16.7441 40.1074C17.0892 39.4368 17.3496 38.7956 17.5254 38.1836C17.6947 37.5716 17.7793 36.9922 17.7793 36.4453C17.7793 35.651 17.6198 35.0358 17.3008 34.5996C16.9753 34.1634 16.5228 33.9453 15.9434 33.9453C15.11 33.9453 14.5339 34.7428 14.2148 36.3379L14.1953 36.416L14.0586 37.0898C13.8568 38.125 13.5182 38.8802 13.043 39.3555C12.5612 39.8307 11.9069 40.0684 11.0801 40.0684C10.0319 40.0684 9.22461 39.7135 8.65821 39.0039C8.08529 38.2943 7.79883 37.2819 7.79883 35.9668C7.79883 35.3809 7.85417 34.8177 7.96485 34.2773C8.06901 33.737 8.22852 33.2064 8.44336 32.6855Z" fill="black"/>
                                <rect width="24" height="24" rx="12" fill="black"/>
                                <path d="M6 7L17.5 7L17.5 18.5" stroke="white" stroke-width="2"/>
                                <path d="M17.3333 7.16667L6.33331 18.1667" stroke="white" stroke-width="2"/>
                            </svg>
                        </Link>
                    </div>
                </div>
              ) }
              <div style={{margin: '5%'}}>
                <Link style={{display: 'inline-block'}} to={`/${company}`}>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect y="24" width="24" height="24" rx="12" transform="rotate(-90 0 24)" fill="black"/>
                        <path d="M6.5 17.75L6.5 6.25L18 6.25" stroke="white" stroke-width="2"/>
                        <path d="M6.66657 6.4165L17.6666 17.4165" stroke="white" stroke-width="2"/>
                    </svg> {company}
                </Link>
              </div>
            </div>
        );
    } else {
        return (
            <>
                <div style={{paddingTop: '45%', textAlign: 'center'}}>No Projects uploaded for this studio</div>
                <div style={{fontSize: '70%', margin: '5%'}}>
                    <Link style={{display: 'inline-block'}} to={`/${company}`}>
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect y="24" width="24" height="24" rx="12" transform="rotate(-90 0 24)" fill="black"/>
                            <path d="M6.5 17.75L6.5 6.25L18 6.25" stroke="white" stroke-width="2"/>
                            <path d="M6.66657 6.4165L17.6666 17.4165" stroke="white" stroke-width="2"/>
                        </svg> {company}
                    </Link>
                </div>
            </>
        );
    }
    
}

export default CarouselPage;